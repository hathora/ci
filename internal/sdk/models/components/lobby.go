// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"errors"
	"fmt"
	"github.com/hathora/ci/internal/sdk/internal/utils"
	"time"
)

type CreatedByType string

const (
	CreatedByTypeStr    CreatedByType = "str"
	CreatedByTypeNumber CreatedByType = "number"
)

// CreatedBy - UserId or email address for the user that created the lobby.
type CreatedBy struct {
	Str    *string  `queryParam:"inline"`
	Number *float64 `queryParam:"inline"`

	Type CreatedByType
}

func CreateCreatedByStr(str string) CreatedBy {
	typ := CreatedByTypeStr

	return CreatedBy{
		Str:  &str,
		Type: typ,
	}
}

func CreateCreatedByNumber(number float64) CreatedBy {
	typ := CreatedByTypeNumber

	return CreatedBy{
		Number: &number,
		Type:   typ,
	}
}

func (u *CreatedBy) UnmarshalJSON(data []byte) error {

	var str string = ""
	if err := utils.UnmarshalJSON(data, &str, "", true, true); err == nil {
		u.Str = &str
		u.Type = CreatedByTypeStr
		return nil
	}

	var number float64 = float64(0)
	if err := utils.UnmarshalJSON(data, &number, "", true, true); err == nil {
		u.Number = &number
		u.Type = CreatedByTypeNumber
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for CreatedBy", string(data))
}

func (u CreatedBy) MarshalJSON() ([]byte, error) {
	if u.Str != nil {
		return utils.MarshalJSON(u.Str, "", true)
	}

	if u.Number != nil {
		return utils.MarshalJSON(u.Number, "", true)
	}

	return nil, errors.New("could not marshal union type CreatedBy: all fields are null")
}

// Lobby - A lobby object allows you to store and manage metadata for your rooms.
type Lobby struct {
	ShortCode *string `json:"shortCode"`
	// JSON blob to store metadata for a room. Must be smaller than 1MB.
	State any `json:"state,omitempty"`
	// User input to initialize the game state. Object must be smaller than 64KB.
	InitialConfig any `json:"initialConfig"`
	// When the lobby was created.
	CreatedAt time.Time `json:"createdAt"`
	// UserId or email address for the user that created the lobby.
	CreatedBy CreatedBy `json:"createdBy"`
	// Deprecated field: This will be removed in a future release, please migrate away from it as soon as possible.
	Local bool `json:"local"`
	// Types of lobbies a player can create.
	//
	// `private`: the player who created the room must share the roomId with their friends
	//
	// `public`: visible in the public lobby list, anyone can join
	//
	// `local`: for testing with a server running locally
	Visibility LobbyVisibility `json:"visibility"`
	Region     Region          `json:"region"`
	// Unique identifier to a game session or match. Use the default system generated ID or overwrite it with your own.
	// Note: error will be returned if `roomId` is not globally unique.
	RoomID string `json:"roomId"`
	// System generated unique identifier for an application.
	AppID string `json:"appId"`
}

func (l Lobby) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(l, "", false)
}

func (l *Lobby) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &l, "", false, false); err != nil {
		return err
	}
	return nil
}

func (o *Lobby) GetShortCode() *string {
	if o == nil {
		return nil
	}
	return o.ShortCode
}

func (o *Lobby) GetState() any {
	if o == nil {
		return nil
	}
	return o.State
}

func (o *Lobby) GetInitialConfig() any {
	if o == nil {
		return nil
	}
	return o.InitialConfig
}

func (o *Lobby) GetCreatedAt() time.Time {
	if o == nil {
		return time.Time{}
	}
	return o.CreatedAt
}

func (o *Lobby) GetCreatedBy() CreatedBy {
	if o == nil {
		return CreatedBy{}
	}
	return o.CreatedBy
}

func (o *Lobby) GetLocal() bool {
	if o == nil {
		return false
	}
	return o.Local
}

func (o *Lobby) GetVisibility() LobbyVisibility {
	if o == nil {
		return LobbyVisibility("")
	}
	return o.Visibility
}

func (o *Lobby) GetRegion() Region {
	if o == nil {
		return Region("")
	}
	return o.Region
}

func (o *Lobby) GetRoomID() string {
	if o == nil {
		return ""
	}
	return o.RoomID
}

func (o *Lobby) GetAppID() string {
	if o == nil {
		return ""
	}
	return o.AppID
}
